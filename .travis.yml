---
env:
  matrix:
    - GEOS_VERSION=3.4.1
before_install:
  - rm .travis.yml
  - sudo apt-get install -qq postgresql-9.1 build-essential flex autoconf libtool gdb gfortran postgresql-plpython-9.1 postgresql-server-dev-all python-psycopg2 xsltproc libproj-dev python2.7-dev dblatex 
  - git config --global user.name "PostGIS TravisCI"
  - git config --global user.email $HOSTNAME":not-for-mail@travis-ci.org"
  - sudo -l -u postgres createuser -s travis
install:
  - wget -q http://download.osgeo.org/geos/geos-$GEOS_VERSION.tar.bz2
  - tar xvjf geos-$GEOS_VERSION.tar.bz2
  - ( cd geos-$GEOS_VERSION && ./configure --prefix=/home/travis/geos-$GEOS_VERSION && make && make install )
  - ./autogen.sh
  - ./configure --with-geosconfig=/home/travis/geos-$GEOS_VERSION/bin/geos-config
language: c
script:
  - ./make
  - ./make check
